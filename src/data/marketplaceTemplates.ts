import type { MarketplaceTemplate, MarketplaceCategory, WidgetType } from '@/types';

export const marketplaceCategories: MarketplaceCategory[] = [
  { id: 'all', name: 'All Templates', icon: 'LayoutGrid', description: 'Browse all widget templates', count: 0 },
  { id: 'chatbot', name: 'Chatbots', icon: 'Bot', description: 'AI-powered conversational widgets', count: 0 },
  { id: 'lead-gen', name: 'Lead Generation', icon: 'UserPlus', description: 'Capture and qualify leads', count: 0 },
  { id: 'engagement', name: 'Engagement', icon: 'Heart', description: 'Boost user engagement', count: 0 },
  { id: 'ecommerce', name: 'E-commerce', icon: 'ShoppingCart', description: 'Sales and product widgets', count: 0 },
  { id: 'support', name: 'Support', icon: 'HeadphonesIcon', description: 'Customer support solutions', count: 0 },
  { id: 'events', name: 'Events', icon: 'Calendar', description: 'Event and webinar widgets', count: 0 },
  { id: 'social', name: 'Social', icon: 'Share2', description: 'Social media integration', count: 0 },
];

export const marketplaceTemplates: MarketplaceTemplate[] = [
  // ========== JOB APPLICATION CHATBOT ==========
  {
    id: 'job-application-chatbot-1',
    name: 'Job Application Chatbot Pro',
    description: 'Collect candidate details including name, contact info, role applied for, experience level, and resume upload. Automatically routes submissions to your email or CRM.',
    category: 'chatbot',
    widgetType: 'job-application-chatbot',
    author: 'Widgetify Team',
    rating: 4.9,
    downloads: 2847,
    tags: ['hiring', 'recruitment', 'HR', 'career', 'resume'],
    isPremium: false,
    conversionRate: '68%',
    useCases: ['Career pages', 'Recruitment websites', 'Job portals', 'Company hiring pages'],
    config: {
      title: 'Apply for This Position',
      welcomeMessage: "Hi there! ğŸ‘‹ I'm here to help you apply for this exciting opportunity. Let's get started!",
      steps: [
        { field: 'name', question: "What's your full name?", type: 'text', required: true },
        { field: 'email', question: "What's your email address?", type: 'email', required: true },
        { field: 'phone', question: "What's your phone number?", type: 'tel', required: true },
        { field: 'role', question: "Which position are you applying for?", type: 'select', options: ['Software Engineer', 'Product Manager', 'Designer', 'Marketing', 'Other'], required: true },
        { field: 'experience', question: "How many years of experience do you have?", type: 'select', options: ['0-1 years', '2-4 years', '5-7 years', '8+ years'], required: true },
        { field: 'resume', question: "Please upload your resume (PDF or DOC)", type: 'file', required: true },
        { field: 'message', question: "Anything else you'd like to share?", type: 'textarea', required: false },
      ],
      successMessage: "Thank you for applying! ğŸ‰ We'll review your application and get back to you within 5 business days.",
      primaryColor: '#6366f1',
      routeToEmail: true,
      routeToCRM: false,
    },
  },
  {
    id: 'job-application-chatbot-2',
    name: 'Quick Apply Chatbot',
    description: 'Streamlined job application flow for high-volume hiring. Minimal steps to maximize completion rates.',
    category: 'chatbot',
    widgetType: 'job-application-chatbot',
    author: 'Widgetify Team',
    rating: 4.7,
    downloads: 1923,
    tags: ['quick-apply', 'hiring', 'recruitment', 'minimal'],
    isPremium: false,
    conversionRate: '72%',
    useCases: ['High-volume hiring', 'Retail jobs', 'Seasonal positions'],
    config: {
      title: 'Quick Apply',
      welcomeMessage: "Apply in under 2 minutes! Let's go ğŸš€",
      steps: [
        { field: 'name', question: "Your name?", type: 'text', required: true },
        { field: 'phone', question: "Phone number?", type: 'tel', required: true },
        { field: 'availability', question: "When can you start?", type: 'select', options: ['Immediately', '1 week', '2 weeks', '1 month'], required: true },
      ],
      successMessage: "Application received! We'll text you soon.",
      primaryColor: '#22c55e',
    },
  },

  // ========== SUBSCRIBER CAPTURE CHATBOT ==========
  {
    id: 'subscriber-capture-chatbot-1',
    name: 'Email Subscriber Capture',
    description: 'Capture email subscribers with an engaging opt-in flow including consent confirmation. GDPR compliant.',
    category: 'lead-gen',
    widgetType: 'subscriber-capture-chatbot',
    author: 'Widgetify Team',
    rating: 4.8,
    downloads: 5621,
    tags: ['newsletter', 'email', 'subscription', 'GDPR', 'opt-in'],
    isPremium: false,
    conversionRate: '45%',
    useCases: ['Blog sites', 'News portals', 'E-commerce stores', 'SaaS websites'],
    config: {
      title: 'Join Our Newsletter',
      welcomeMessage: "Get exclusive updates, tips, and special offers! ğŸ“¬",
      incentive: '10% off your first order',
      steps: [
        { field: 'email', question: "What's your email address?", type: 'email', required: true },
        { field: 'name', question: "What should we call you?", type: 'text', required: false },
        { field: 'consent', question: "I agree to receive marketing emails. You can unsubscribe anytime.", type: 'checkbox', required: true },
      ],
      successMessage: "You're in! ğŸ‰ Check your inbox for a welcome gift.",
      primaryColor: '#9b87f5',
    },
  },
  {
    id: 'subscriber-capture-chatbot-2',
    name: 'WhatsApp Subscriber Bot',
    description: 'Capture WhatsApp subscribers with opt-in consent. Perfect for direct messaging campaigns.',
    category: 'lead-gen',
    widgetType: 'subscriber-capture-chatbot',
    author: 'Widgetify Team',
    rating: 4.9,
    downloads: 3842,
    tags: ['whatsapp', 'messaging', 'subscription', 'direct-marketing'],
    isPremium: false,
    conversionRate: '58%',
    useCases: ['E-commerce', 'Local businesses', 'Service providers', 'Restaurants'],
    config: {
      title: 'Get Updates on WhatsApp',
      welcomeMessage: "Stay connected! Get updates directly on WhatsApp ğŸ“±",
      steps: [
        { field: 'phone', question: "Your WhatsApp number?", type: 'tel', required: true },
        { field: 'name', question: "Your name?", type: 'text', required: true },
        { field: 'consent', question: "I agree to receive WhatsApp messages. Reply STOP to unsubscribe.", type: 'checkbox', required: true },
      ],
      successMessage: "Added! ğŸ“² You'll receive our first message soon.",
      primaryColor: '#25D366',
    },
  },

  // ========== LEAD GENERATION CHATBOT ==========
  {
    id: 'lead-generation-chatbot-1',
    name: 'B2B Lead Qualifier',
    description: 'Qualify leads by asking business-relevant questions. Captures company size, budget, and timeline for effective follow-ups.',
    category: 'lead-gen',
    widgetType: 'lead-generation-chatbot',
    author: 'Widgetify Team',
    rating: 4.9,
    downloads: 7234,
    tags: ['B2B', 'sales', 'qualification', 'enterprise', 'leads'],
    isPremium: false,
    conversionRate: '52%',
    useCases: ['SaaS websites', 'Enterprise sales', 'B2B services', 'Consulting firms'],
    config: {
      title: 'Get a Custom Quote',
      welcomeMessage: "Hi! ğŸ‘‹ Let me help you find the perfect solution for your business.",
      steps: [
        { field: 'company', question: "What's your company name?", type: 'text', required: true },
        { field: 'name', question: "And your name?", type: 'text', required: true },
        { field: 'email', question: "Best email to reach you?", type: 'email', required: true },
        { field: 'phone', question: "Phone number for a quick chat?", type: 'tel', required: false },
        { field: 'size', question: "How many employees in your company?", type: 'select', options: ['1-10', '11-50', '51-200', '201-500', '500+'], required: true },
        { field: 'budget', question: "What's your budget range?", type: 'select', options: ['Under $1K/mo', '$1K-$5K/mo', '$5K-$10K/mo', '$10K+/mo'], required: true },
        { field: 'timeline', question: "When are you looking to start?", type: 'select', options: ['ASAP', 'This month', 'Next quarter', 'Just exploring'], required: true },
        { field: 'challenge', question: "What's your biggest challenge right now?", type: 'textarea', required: true },
      ],
      successMessage: "Perfect! ğŸ¯ Our team will reach out within 24 hours with a custom proposal.",
      primaryColor: '#3b82f6',
      leadScore: true,
    },
  },
  {
    id: 'lead-generation-chatbot-2',
    name: 'Service Inquiry Bot',
    description: 'Capture service inquiries with specific needs assessment. Great for agencies and service providers.',
    category: 'lead-gen',
    widgetType: 'lead-generation-chatbot',
    author: 'Widgetify Team',
    rating: 4.7,
    downloads: 4521,
    tags: ['services', 'agency', 'inquiry', 'consultation'],
    isPremium: false,
    conversionRate: '48%',
    useCases: ['Marketing agencies', 'Web development', 'Legal services', 'Consulting'],
    config: {
      title: 'Tell Us About Your Project',
      welcomeMessage: "Let's discuss how we can help your business grow! ğŸš€",
      steps: [
        { field: 'service', question: "What service are you interested in?", type: 'select', options: ['Web Design', 'SEO', 'Marketing', 'Consulting', 'Other'], required: true },
        { field: 'name', question: "Your name?", type: 'text', required: true },
        { field: 'email', question: "Email address?", type: 'email', required: true },
        { field: 'details', question: "Tell us about your project goals", type: 'textarea', required: true },
      ],
      successMessage: "Got it! We'll review and get back to you with a proposal.",
      primaryColor: '#8b5cf6',
    },
  },

  // ========== WEBINAR REGISTRATION CHATBOT ==========
  {
    id: 'webinar-registration-chatbot-1',
    name: 'Webinar Registration Pro',
    description: 'Register users for webinars by collecting name, email, date preference, and sending confirmation messages.',
    category: 'events',
    widgetType: 'webinar-registration-chatbot',
    author: 'Widgetify Team',
    rating: 4.8,
    downloads: 4123,
    tags: ['webinar', 'registration', 'events', 'online-event', 'virtual'],
    isPremium: false,
    conversionRate: '62%',
    useCases: ['Marketing webinars', 'Training sessions', 'Product demos', 'Educational content'],
    config: {
      title: 'Register for Our Webinar',
      welcomeMessage: "Secure your spot for our upcoming live session! ğŸ“",
      webinarTitle: 'Mastering Digital Marketing in 2024',
      availableDates: ['Jan 20, 2024 - 2PM EST', 'Jan 22, 2024 - 11AM EST', 'Jan 25, 2024 - 4PM EST'],
      steps: [
        { field: 'name', question: "What's your name?", type: 'text', required: true },
        { field: 'email', question: "Email for your calendar invite?", type: 'email', required: true },
        { field: 'date', question: "Which date works best for you?", type: 'select', options: ['Jan 20 - 2PM EST', 'Jan 22 - 11AM EST', 'Jan 25 - 4PM EST'], required: true },
        { field: 'company', question: "Company name (optional)", type: 'text', required: false },
        { field: 'questions', question: "Any specific topics you'd like covered?", type: 'textarea', required: false },
      ],
      successMessage: "You're registered! ğŸ“… Check your email for the calendar invite and join link.",
      sendConfirmation: true,
      addToCalendar: true,
      primaryColor: '#ec4899',
    },
  },
  {
    id: 'webinar-registration-chatbot-2',
    name: 'Quick Event Signup',
    description: 'Minimal-step event registration for maximum conversions. One-tap calendar integration.',
    category: 'events',
    widgetType: 'webinar-registration-chatbot',
    author: 'Widgetify Team',
    rating: 4.6,
    downloads: 2891,
    tags: ['event', 'quick-signup', 'workshop', 'seminar'],
    isPremium: false,
    conversionRate: '71%',
    useCases: ['Free workshops', 'Community events', 'Meetups', 'Lunch & learns'],
    config: {
      title: 'Join Our Event',
      welcomeMessage: "Reserve your spot in 30 seconds! âš¡",
      steps: [
        { field: 'email', question: "Your email?", type: 'email', required: true },
        { field: 'name', question: "Your name?", type: 'text', required: true },
      ],
      successMessage: "See you there! ğŸ‰ Calendar invite sent.",
      primaryColor: '#f59e0b',
    },
  },

  // ========== E-COMMERCE ASSISTANT CHATBOT ==========
  {
    id: 'ecommerce-assistant-chatbot-1',
    name: 'E-commerce Sales Assistant',
    description: 'Assist users with product discovery, FAQs, order status inquiries, and purchase guidance. Increase conversions with personalized recommendations.',
    category: 'ecommerce',
    widgetType: 'ecommerce-assistant-chatbot',
    author: 'Widgetify Team',
    rating: 4.9,
    downloads: 8923,
    tags: ['ecommerce', 'shopping', 'sales', 'product', 'support'],
    isPremium: false,
    conversionRate: '38%',
    useCases: ['Online stores', 'Shopify sites', 'WooCommerce', 'Marketplaces'],
    config: {
      title: 'Shopping Assistant',
      welcomeMessage: "Hi there! ğŸ›ï¸ How can I help you shop today?",
      quickActions: [
        { label: 'Find Products', action: 'product_discovery' },
        { label: 'Track Order', action: 'order_status' },
        { label: 'Shipping Info', action: 'shipping_faq' },
        { label: 'Returns', action: 'returns_faq' },
        { label: 'Talk to Human', action: 'live_agent' },
      ],
      productCategories: ['Clothing', 'Electronics', 'Home & Garden', 'Beauty', 'Sports'],
      faqs: [
        { question: 'How long does shipping take?', answer: 'Standard shipping takes 5-7 business days. Express is 2-3 days.' },
        { question: 'What is your return policy?', answer: '30-day hassle-free returns on all items.' },
        { question: 'Do you ship internationally?', answer: 'Yes! We ship to over 50 countries.' },
      ],
      successMessage: "Thanks for shopping with us! ğŸ›’",
      primaryColor: '#f97316',
      enableAI: true,
    },
  },
  {
    id: 'ecommerce-assistant-chatbot-2',
    name: 'Product Finder Bot',
    description: 'Help customers find the perfect product based on their preferences and needs.',
    category: 'ecommerce',
    widgetType: 'ecommerce-assistant-chatbot',
    author: 'Widgetify Team',
    rating: 4.7,
    downloads: 5234,
    tags: ['product-finder', 'recommendations', 'quiz', 'personalization'],
    isPremium: false,
    conversionRate: '42%',
    useCases: ['Fashion stores', 'Electronics', 'Gift shops', 'Beauty products'],
    config: {
      title: 'Find Your Perfect Match',
      welcomeMessage: "Let me help you find exactly what you're looking for! ğŸ¯",
      steps: [
        { field: 'category', question: "What are you shopping for today?", type: 'buttons', options: ['Clothing', 'Electronics', 'Home', 'Gifts'], required: true },
        { field: 'budget', question: "What's your budget?", type: 'buttons', options: ['Under $50', '$50-$100', '$100-$200', '$200+'], required: true },
        { field: 'style', question: "What style do you prefer?", type: 'buttons', options: ['Classic', 'Modern', 'Trendy', 'Minimalist'], required: true },
      ],
      successMessage: "Here are my top picks for you! ğŸŒŸ",
      primaryColor: '#14b8a6',
    },
  },

  // ========== WHATSAPP INTERACTIVE FORM ==========
  {
    id: 'whatsapp-interactive-form-1',
    name: 'WhatsApp Lead Form',
    description: 'Replace traditional forms with an interactive WhatsApp-based form for 3x faster conversions. Collects info via WhatsApp chat.',
    category: 'lead-gen',
    widgetType: 'whatsapp-interactive-form',
    author: 'Widgetify Team',
    rating: 4.9,
    downloads: 6721,
    tags: ['whatsapp', 'form', 'lead-capture', 'interactive', 'mobile-first'],
    isPremium: false,
    conversionRate: '65%',
    useCases: ['Service businesses', 'Restaurants', 'Real estate', 'Local businesses'],
    config: {
      title: 'Contact Us on WhatsApp',
      welcomeMessage: "Chat with us directly on WhatsApp! ğŸ’¬",
      whatsappNumber: '',
      prefilledMessage: "Hi! I'm interested in learning more about your services. Here are my details:\n\nName: \nEmail: \nInterested in: ",
      fields: ['name', 'email', 'phone', 'interest'],
      buttonText: 'Chat on WhatsApp',
      primaryColor: '#25D366',
    },
  },
  {
    id: 'whatsapp-interactive-form-2',
    name: 'WhatsApp Order Form',
    description: 'Take orders directly via WhatsApp. Perfect for restaurants, bakeries, and small retailers.',
    category: 'ecommerce',
    widgetType: 'whatsapp-interactive-form',
    author: 'Widgetify Team',
    rating: 4.8,
    downloads: 4892,
    tags: ['whatsapp', 'orders', 'food', 'retail', 'small-business'],
    isPremium: false,
    conversionRate: '58%',
    useCases: ['Restaurants', 'Bakeries', 'Food delivery', 'Small retailers'],
    config: {
      title: 'Order via WhatsApp',
      welcomeMessage: "Place your order easily through WhatsApp! ğŸ•",
      whatsappNumber: '',
      prefilledMessage: "Hi! I'd like to place an order:\n\nItems: \nDelivery Address: \nTime: ",
      buttonText: 'Order Now',
      primaryColor: '#25D366',
    },
  },

  // ========== ADDITIONAL HIGH-CONVERSION TEMPLATES ==========
  {
    id: 'appointment-booking-bot',
    name: 'Appointment Booking Bot',
    description: 'Let customers book appointments directly through chat. Syncs with calendars.',
    category: 'support',
    widgetType: 'booking-calendar',
    author: 'Widgetify Team',
    rating: 4.8,
    downloads: 5123,
    tags: ['booking', 'appointments', 'calendar', 'scheduling'],
    isPremium: false,
    conversionRate: '55%',
    useCases: ['Salons', 'Clinics', 'Consultants', 'Service providers'],
    config: {
      title: 'Book an Appointment',
      welcomeMessage: "Schedule your appointment in seconds! ğŸ“…",
      primaryColor: '#6366f1',
    },
  },
  {
    id: 'customer-support-bot',
    name: 'AI Customer Support',
    description: 'Instant AI-powered answers to common questions. Escalates to human when needed.',
    category: 'support',
    widgetType: 'ai-chatbot',
    author: 'Widgetify Team',
    rating: 4.9,
    downloads: 9234,
    tags: ['AI', 'support', 'customer-service', '24/7', 'automation'],
    isPremium: false,
    conversionRate: 'N/A',
    useCases: ['Any business', 'SaaS', 'E-commerce', 'Service companies'],
    config: {
      title: 'Need Help?',
      welcomeMessage: "Hi! I'm your AI assistant. How can I help you today? ğŸ¤–",
      primaryColor: '#8b5cf6',
      enableAI: true,
    },
  },
  {
    id: 'feedback-collection-bot',
    name: 'Feedback Collector',
    description: 'Collect customer feedback and NPS scores through engaging conversation.',
    category: 'engagement',
    widgetType: 'feedback-form',
    author: 'Widgetify Team',
    rating: 4.6,
    downloads: 3421,
    tags: ['feedback', 'NPS', 'reviews', 'customer-satisfaction'],
    isPremium: false,
    conversionRate: '42%',
    useCases: ['Post-purchase', 'Service follow-up', 'Product improvement'],
    config: {
      title: 'Share Your Feedback',
      welcomeMessage: "We'd love to hear from you! ğŸ’­",
      primaryColor: '#f59e0b',
    },
  },
  {
    id: 'exit-intent-offer-bot',
    name: 'Exit Intent Saver',
    description: 'Catch leaving visitors with a compelling offer or last-chance engagement.',
    category: 'engagement',
    widgetType: 'exit-intent-popup',
    author: 'Widgetify Team',
    rating: 4.7,
    downloads: 6234,
    tags: ['exit-intent', 'popup', 'offer', 'retention'],
    isPremium: false,
    conversionRate: '15%',
    useCases: ['E-commerce', 'Lead generation', 'Newsletter signup'],
    config: {
      title: "Wait! Don't Go",
      welcomeMessage: "Here's a special offer just for you! ğŸ",
      offerCode: 'SAVE20',
      primaryColor: '#ef4444',
    },
  },
  {
    id: 'social-proof-widget',
    name: 'Live Social Proof',
    description: 'Show real-time activity notifications to build trust and urgency.',
    category: 'engagement',
    widgetType: 'live-visitor-counter',
    author: 'Widgetify Team',
    rating: 4.5,
    downloads: 4521,
    tags: ['social-proof', 'FOMO', 'trust', 'notifications'],
    isPremium: false,
    conversionRate: '+23% conversions',
    useCases: ['E-commerce', 'SaaS', 'Event registration'],
    config: {
      title: 'People are viewing this!',
      primaryColor: '#22c55e',
    },
  },
];

// Update category counts
marketplaceCategories.forEach(cat => {
  if (cat.id === 'all') {
    cat.count = marketplaceTemplates.length;
  } else {
    cat.count = marketplaceTemplates.filter(t => t.category === cat.id).length;
  }
});

export const getTemplatesByCategory = (categoryId: string): MarketplaceTemplate[] => {
  if (categoryId === 'all') return marketplaceTemplates;
  return marketplaceTemplates.filter(t => t.category === categoryId);
};

export const searchTemplates = (query: string): MarketplaceTemplate[] => {
  const lowerQuery = query.toLowerCase();
  return marketplaceTemplates.filter(t => 
    t.name.toLowerCase().includes(lowerQuery) ||
    t.description.toLowerCase().includes(lowerQuery) ||
    t.tags.some(tag => tag.toLowerCase().includes(lowerQuery))
  );
};

export const getTemplateById = (id: string): MarketplaceTemplate | undefined => {
  return marketplaceTemplates.find(t => t.id === id);
};
